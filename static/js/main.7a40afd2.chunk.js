(this["webpackJsonpre-store"]=this["webpackJsonpre-store"]||[]).push([[0],{32:function(e,t,n){e.exports=n(51)},37:function(e,t,n){},38:function(e,t,n){},39:function(e,t,n){},45:function(e,t,n){},46:function(e,t,n){},47:function(e,t,n){},48:function(e,t,n){},49:function(e,t,n){},51:function(e,t,n){"use strict";n.r(t);var a=n(19),r=n.n(a),o=n(0),i=n.n(o),c=(n(37),n(13)),l=n(11),u=n(12),s=n(15),m=n(14),d=n(16),f=(n(38),n(39),n(4)),p=n(9),b=function(e){return{type:"FETCH_BOOK_SUCCESS",payload:e}},h=function(e){return{type:"FETCH_BOOK_FAILURE",payload:e}},E=function(e){return{type:"BOOK_ADDED_TO_CART",payload:e}},g=function(e){return{type:"BOOK_REMOVED_FROM_CART",payload:e}},k=function(e){return{type:"ALL_BOOKS_REMOVED_FROM_CART",payload:e}},v=n(5),O=Object(v.b)((function(e){return{books:e.bookList.books}}),(function(e){return Object(p.b)({bookAddedToCart:E},e)}))((function(e){var t=e.book,n=e.onAddedToCart,a=t.title,r=t.author,o=t.price,c=t.bookImageUrl;return i.a.createElement("div",{className:"book-list-item"},i.a.createElement(f.b,{to:"/books/".concat(t.id),className:"book-image"},i.a.createElement("img",{src:c,alt:"book"})),i.a.createElement("div",{className:"book-details"},i.a.createElement(f.b,{to:"/books/".concat(t.id),className:"book-title"},a),i.a.createElement("div",{className:"book-author"},r),i.a.createElement("div",{className:"book-price"},"$",o),i.a.createElement("button",{onClick:n,className:"btn btn-info add-to-cart"},"Add to cart")))})),y=function(e){var t=e.books,n=e.onAddedToCart;return i.a.createElement("ul",{className:"book-list"},t.map((function(e){return i.a.createElement("li",{key:e.id},i.a.createElement(O,{book:e,onAddedToCart:function(){return n(e.id)}}))})))},C=(n(45),Object(v.b)((function(e){var t=e.shoppingCart;return{items:t.cartItems,total:t.orderTotal}}),(function(e){return Object(p.b)({onIncrease:E,onDecrease:g,onDelete:k},e)}))((function(e){var t=e.items,n=e.total,a=e.onIncrease,r=e.onDecrease,o=e.onDelete;return i.a.createElement("div",{className:"shopping-cart-table"},i.a.createElement("h2",null,"Your Order"),i.a.createElement("table",{className:"table"},i.a.createElement("thead",null,i.a.createElement("tr",null,i.a.createElement("th",null,"#"),i.a.createElement("th",null,"Item"),i.a.createElement("th",null,"Count"),i.a.createElement("th",null,"Total Price"),i.a.createElement("th",null))),i.a.createElement("tbody",null,t.map((function(e,t){var n=e.id,c=e.title,l=e.count,u=e.total;return t=++t,i.a.createElement("tr",{key:t},i.a.createElement("td",null,t),i.a.createElement("td",null,c),i.a.createElement("td",null,l),i.a.createElement("td",null,u),i.a.createElement("td",null,i.a.createElement("button",{onClick:function(){return o(n)},className:"btn btn-outline-danger btn-sm float-right"},i.a.createElement("i",{className:"fa fa-trash-o"})),i.a.createElement("button",{onClick:function(){return a(n)},className:"btn btn-outline-success btn-sm float-right"},i.a.createElement("i",{className:"fa fa-plus-circle"})),i.a.createElement("button",{onClick:function(){return r(n)},className:"btn btn-outline-warning btn-sm float-right"},i.a.createElement("i",{className:"fa fa-minus-circle"}))))})))),i.a.createElement("div",{className:"total"},"Total: $",n))}))),B=C,T=(n(46),function(){return i.a.createElement("div",{className:"loader"},"Loading...")}),w=(n(47),function(e){var t=e.errorText,n=void 0===t?"something has gone terribly wrong":t;return i.a.createElement("div",{className:"error-indicator"},i.a.createElement("span",{className:"error-header"},"OOPS!"),i.a.createElement("span",null,n),i.a.createElement("div",null,i.a.createElement(f.b,{className:"main-page-link",to:"/"},"Go to main page"),i.a.createElement("span",null," or "),i.a.createElement("span",{className:"main-page-link",onClick:function(){return window.location.reload()}},"Reload")))}),S=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return t.reduceRight((function(e,t){return t(e)}),e)}},N=i.a.createContext(),_=N.Provider,j=N.Consumer,A=function(){return function(e){return function(t){return i.a.createElement(j,null,(function(n){return i.a.createElement(e,Object.assign({},t,{bookStoreService:n}))}))}}},I=function(e){function t(){return Object(l.a)(this,t),Object(s.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){(0,this.props.fetchBooks)()}},{key:"render",value:function(){var e=this.props,t=e.isBooksLoading,n=e.error,a=e.books,r=e.onAddedToCart;return t?i.a.createElement(T,null):n?i.a.createElement(w,null):i.a.createElement("div",null,i.a.createElement(y,{books:a,onAddedToCart:r}),i.a.createElement(B,null))}}]),t}(i.a.Component),D=S(A(),Object(v.b)((function(e){var t=e.bookList;return{isBooksLoading:t.isBooksLoading,error:t.error,books:t.books}}),(function(e,t){return{fetchBooks:function(){e({type:"FETCH_BOOK_REQUEST"}),t.bookStoreService.getBooks().then((function(t){return e(b(t))})).catch((function(t){return e(h(t))}))},onAddedToCart:function(t){return e(E(t))}}})))(I),L=function(){return i.a.createElement("div",null,i.a.createElement(C,null),i.a.createElement("button",{type:"button",className:"btn btn-primary float-right",style:{clear:"right","margin-top":"20px"}},"BUY!"))},R=(n(48),function(e){var t=e.book,n=e.onAddedToCart,a=t.title,r=t.author,o=t.price,c=t.bookImageUrl,l=t.description;return i.a.createElement("div",{className:"book-item"},i.a.createElement("img",{src:c,alt:"book"}),i.a.createElement("div",{className:"book-title"},a),i.a.createElement("div",{className:"book-author"},r),i.a.createElement("div",{className:"book-description"},l),i.a.createElement("div",{className:"book-price"},"$",o),i.a.createElement("button",{onClick:n,className:"btn btn-info add-to-cart"},"Add to cart"))}),J=function(e){function t(){return Object(l.a)(this,t),Object(s.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.fetchBook,t=this.getChosenBookId();this.findBook(t)||e(t)}},{key:"findBook",value:function(e){return this.props.books.find((function(t){return t.id===e}))}},{key:"getChosenBookId",value:function(){var e=this.props.match;return Number(e.params.id)}},{key:"render",value:function(){var e=this.props,t=e.onAddedToCart,n=e.error,a=e.isBooksLoading;if(n)return i.a.createElement(w,{errorText:"Book not found!"});if(a)return i.a.createElement(T,null);var r=this.getChosenBookId(),o=this.findBook(r);return i.a.createElement(R,{book:o,onAddedToCart:function(){return t(r)}})}}]),t}(i.a.Component),F=S(A(),c.g,Object(v.b)((function(e){var t=e.bookList;return{books:t.books,error:t.error,isBooksLoading:t.isBooksLoading}}),(function(e,t){return{onAddedToCart:function(t){return e(E(t))},fetchBook:function(n){t.bookStoreService.getBook(n).then((function(t){console.log(t),e(b([t]))})).catch((function(t){return e(h(t))}))}}})))(J),K=(n(49),Object(v.b)((function(e){var t=e.shoppingCart;return{count:t.totalCount,total:t.orderTotal}}))((function(e){var t=e.count,n=e.total;return i.a.createElement("header",{className:"shop-header"},i.a.createElement(f.b,{to:"/"},i.a.createElement("div",{className:"shop-name"},"ReStore")),i.a.createElement(f.b,{to:"/cart"},i.a.createElement("div",null,i.a.createElement("i",{className:"cart-icon fa fa-shopping-cart"}),t," items ($",n,")")))}))),M=function(){return i.a.createElement("main",{role:"main",className:"container"},i.a.createElement(K,null),i.a.createElement(c.d,null,i.a.createElement(c.b,{path:"/",component:D,exact:!0}),i.a.createElement(c.b,{path:"/cart",component:L}),i.a.createElement(c.b,{path:"/books/:id",component:F}),i.a.createElement(c.a,{to:"/"})))},x=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(s.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={hasError:!1},n}return Object(d.a)(t,e),Object(u.a)(t,[{key:"componentDidCatch",value:function(e,t){console.log(t),this.setState({hasError:!0})}},{key:"render",value:function(){return this.state.hasError?i.a.createElement(w,null):this.props.children}}]),t}(o.Component),U=n(25),G=n.n(U),H=n(30),P=function(){function e(){Object(l.a)(this,e)}return Object(u.a)(e,[{key:"getBook",value:function(){var t=Object(H.a)(G.a.mark((function t(n){var a;return G.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=e.getData().find((function(e){return e.id===n}))){t.next=3;break}throw new Error("can't find book");case 3:return t.abrupt("return",a);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},{key:"getBooks",value:function(){return new Promise((function(t,n){setTimeout((function(){Math.random()>.95&&n(new Error("unrecognized error")),t(e.getData())}),2e3)}))}}],[{key:"getData",value:function(){return[{id:1,author:"Kyle Simpson",title:"You Don't Know JS: Up & Going",price:9.39,bookImageUrl:"https://images-na.ssl-images-amazon.com/images/I/41WdbPkuINL._SX331_BO1,204,203,200_.jpg",description:'It\u2019s easy to learn parts of JavaScript, but much harder to learn it completely\u2014or even sufficiently\u2014whether you\u2019re new to the language or have used it for years. With the "You Don\u2019t Know JS" book series, you\u2019ll get a more complete understanding of JavaScript, including trickier parts of the language that many experienced JavaScript programmers simply avoid.\n\nThe series\u2019 first book, Up & Going, provides the necessary background for those of you with limited programming experience. By learning the basic building blocks of programming, as well as JavaScript\u2019s core mechanisms, you\u2019ll be prepared to dive into the other, more in-depth books in the series\u2014and be well on your way toward true JavaScript.\n\nWith this book you will:\n\nLearn the essential programming building blocks, including operators, types, variables, conditionals, loops, and functions\nBecome familiar with JavaScript\'s core mechanisms such as values, function closures, this, and prototypes\nGet an overview of other books in the series\u2014and learn why it\u2019s important to understand all parts of JavaScript'},{id:2,author:"David Flanagan",title:"JavaScript: The Definitive Guide: Activate Your Web Pages (Definitive Guides)",price:33.99,bookImageUrl:"https://images-na.ssl-images-amazon.com/images/I/51lu4ArIFYL._SX379_BO1,204,203,200_.jpg",description:"Since 1996, JavaScript: The Definitive Guide has been the bible for JavaScript programmers\u2014a programmer's guide and comprehensive reference to the core language and to the client side JavaScript APIs defined by web browsers.\n\nThe 6th edition covers HTML5 and ECMAScript 5. Many chapters have been completely rewritten to bring them in line with today's best web development practices. New chapters in this edition document jQuery and server side JavaScript. It's recommended for experienced programmers who want to learn the programming language of the Web, and for current JavaScript programmers who want to master it.\n\n\"A must have reference for expert JavaScript programmers...well organized and detailed.\"\n\n\u2014Brendan Eich, creator of JavaScript, CTO of Mozilla\n\n\"I made a career of what I learned from JavaScript: The Definitive Guide.\u201d\n\n\u2014Andrew Hedges, Tapulous"}]}}]),e}(),Y=n(17),z=function(e,t,n){var a=e.shoppingCart.cartItems,r=e.bookList.books,o=a.findIndex((function(e){return e.id===t})),i=a[o],c=r.find((function(e){return e.id===t})),l=V(c,i,n),u=W(a,l,o);return{orderTotal:Q(u),cartItems:u,totalCount:$(u)}},W=function(e,t,n){return 0===t.count?[].concat(Object(Y.a)(e.slice(0,n)),Object(Y.a)(e.slice(n+1))):-1===n?[].concat(Object(Y.a)(e),[t]):[].concat(Object(Y.a)(e.slice(0,n)),[t],Object(Y.a)(e.slice(n+1)))},V=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,a=t.id,r=void 0===a?e.id:a,o=t.count,i=void 0===o?0:o,c=t.title,l=void 0===c?e.title:c,u=t.total,s=void 0===u?0:u;return{id:r,title:l,count:i+n,total:X(s+e.price*n)}},$=function(e){return e.map((function(e){return e.count})).reduce((function(e,t){return e+t}),0)},Q=function(e){return X(e.map((function(e){return e.total})).reduce((function(e,t){return e+t}),0))},X=function(e){return Number(Number(e).toFixed(2))},q=function(e,t){if(!e)return{cartItems:[],orderTotal:0,totalCount:0};switch(t.type){case"BOOK_ADDED_TO_CART":return z(e,t.payload,1);case"ALL_BOOKS_REMOVED_FROM_CART":var n=e.shoppingCart.cartItems.find((function(e){return e.id===t.payload}));return z(e,t.payload,-n.count);case"BOOK_REMOVED_FROM_CART":return z(e,t.payload,-1);default:return e.shoppingCart}},Z=function(e,t){if(!e)return{books:[],isBooksLoading:!0,error:null};switch(t.type){case"FETCH_BOOK_SUCCESS":return{books:t.payload,isBooksLoading:!1,error:null};case"FETCH_BOOK_REQUEST":return{books:[],isBooksLoading:!0,error:null};case"FETCH_BOOK_FAILURE":return{error:t.payload,books:[],isBooksLoading:!1};default:return e.bookList}},ee=function(e,t){return{bookList:Z(e,t),shoppingCart:q(e,t)}},te=n(31),ne=Object(p.c)(ee,Object(p.a)(te.a,(function(e){return function(e){return function(t){return"string"===typeof t&&(t={type:t}),e(t)}}}),(function(e){return function(t){return function(n){return console.log(n.type),console.log(n.payload),console.log(e.getState()),t(n)}}})));ne.subscribe((function(){return console.log("store is updated")}));var ae=ne,re=new P;r.a.render(i.a.createElement(v.a,{store:ae}," ",i.a.createElement(x,null," ",i.a.createElement(_,{value:re}," ",i.a.createElement(f.a,null," ",i.a.createElement(M,null))))),document.getElementById("root"))}},[[32,1,2]]]);
//# sourceMappingURL=main.7a40afd2.chunk.js.map